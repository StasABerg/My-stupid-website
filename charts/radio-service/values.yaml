replicaCount: 2

image:
  registry: ghcr.io
  repository: stasaberg/radio-service
  tag: ""
  pullPolicy: IfNotPresent

nameOverride: ""
fullnameOverride: "my-stupid-website-radio"

serviceAccount:
  create: false
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext:
  runAsNonRoot: true
  fsGroup: 101
  seccompProfile:
    type: RuntimeDefault

securityContext:
  runAsUser: 101
  runAsGroup: 101
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  seccompProfile:
    type: RuntimeDefault

service:
  type: ClusterIP
  port: 4010
  targetPort: 4010

containerPort: 4010

ingress:
  enabled: false
  className: traefik
  annotations: {}
  hosts: []
  tls: []

env:
  - name: REDIS_URL
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: REDIS_URL
        optional: true
  - name: STATIONS_CACHE_KEY
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: STATIONS_CACHE_KEY
        optional: true
  - name: STATIONS_CACHE_TTL
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: STATIONS_CACHE_TTL
        optional: true
  - name: MINIO_ENDPOINT
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: MINIO_ENDPOINT
        optional: true
  - name: MINIO_REGION
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: MINIO_REGION
        optional: true
  - name: MINIO_ACCESS_KEY
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: MINIO_ACCESS_KEY
  - name: MINIO_SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: MINIO_SECRET_KEY
  - name: MINIO_BUCKET
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: MINIO_BUCKET
        optional: true
  - name: STATIONS_OBJECT_KEY
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: STATIONS_OBJECT_KEY
        optional: true
  - name: STATIONS_REFRESH_TOKEN
    valueFrom:
      secretKeyRef:
        name: radio-service-env
        key: STATIONS_REFRESH_TOKEN
        optional: true
  - name: ALLOW_INSECURE_TRANSPORT
    value: "true"
  - name: STREAM_VALIDATION_CONCURRENCY
    value: "64"

initContainers: []

resources:
  requests:
    cpu: 1000m
    memory: 2Gi
  limits:
    cpu: 2000m
    memory: 4Gi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 8
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 75

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 10
  periodSeconds: 15

readinessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

nodeSelector: {}
tolerations: []
affinity: {}
